<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ActiveSG Gym Capacity Trends</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Outfit:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/styles.css">
</head>
<body>
    <div class="container">
        <div class="hero">
            <div class="hero-badge">ğŸ“Š Data-Driven Insights</div>
            <h1 class="hero-title">ActiveSG Gym Capacity Trends</h1>
            <p class="hero-subtitle">Plan your workout with data-driven insights</p>
        </div>

        <div class="layout">
            <aside>
                <div class="card">
                    <h2 class="card-title">
                        <span class="card-icon">ğŸ‹ï¸</span>
                        Choose Your Gym
                    </h2>
                    <div class="selector-wrapper">
                        <label class="selector-label" for="gym-select">Gym Location</label>
                        <select id="gym-select" class="gym-select">
                            <option value="">Select your preferred gym...</option>
                        </select>
                        <button class="btn btn-full" onclick="analyzeGym()">
                            View Trends â†’
                        </button>
                    </div>
                </div>

                <div class="card">
                    <h2 class="card-title">
                        <span class="card-icon">ğŸ¤–</span>
                        AI Assistant
                    </h2>
                    <p>Not sure which gym to check? Ask our AI chatbot for personalized recommendations based on crowd levels.</p>
                    <a href="chatbot.html" class="btn btn-full">
                        Chat Now â†’
                    </a>
                </div>
            </aside>

            <main>
                <div class="card">
                    <h2 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        About This Project
                    </h2>
                    <p>Struggling to find the best time to hit the gym without the crowd? This tool helps ActiveSG users make informed decisions by visualizing gym capacity trends, whether you're avoiding peak hours or just curious about crowd patterns.</p>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">ğŸ“ˆ</span>
                            <span class="feature-text">Hourly Crowd Predictions</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">ğŸ“…</span>
                            <span class="feature-text">Weekday vs Weekend Trends</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2 class="card-title">
                        <span class="card-icon">ğŸ“Š</span>
                        By The Numbers
                    </h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <span class="stat-number">28</span>
                            <span class="stat-label">ActiveSG Gyms</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number">90+</span>
                            <span class="stat-label">Days of Data</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number">24/7</span>
                            <span class="stat-label">Tracking every 15min</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2 class="card-title">
                        <span class="card-icon">ğŸ”</span>
                        Data Trends
                    </h2>
                    <p>We continuously webscrape ActiveSG's gym capacity data over the last 3 months to provide you with the most accurate and up-to-date trends.</p>
                    <a href="https://activesg.gov.sg/gym-pool-crowd" target="_blank" rel="noopener noreferrer" class="btn btn-secondary" style="margin-top: 1.5rem;">
                        View Official Source â†’
                    </a>
                </div>
            </main>
        </div>
    </div>

    <footer class="site-footer">
        <p>Â© 2026 Dillon. All rights reserved.</p>
    </footer>

    <script>
        function analyzeGym() {
            const select = document.getElementById('gym-select');
            const selectedGym = select.value;

            if (!selectedGym) {
                alert('Please select a gym first!');
                select.focus();
                return;
            }

            window.location.href = `gympage.html?gym=${selectedGym}`;
        }

        document.getElementById('gym-select').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                analyzeGym();
            }
        });

        // Dynamically populate gym select from JSON
        fetch('../static/gym_capacity_summary.json')
            .then(res => res.json())
            .then(data => {
                const select = document.getElementById('gym-select');

                // Convert keys to array of {key, name}, replace _ with space, and sort alphabetically
                const gyms = Object.keys(data)
                    .map(key => ({ key, name: key.replace(/_/g, ' ') }))
                    .sort((a, b) => a.name.localeCompare(b.name));

                // Add each gym as an option
                gyms.forEach(gym => {
                    const option = document.createElement('option');
                    option.value = gym.key;        // keeps original key for URL
                    option.textContent = gym.name; // readable name
                    select.appendChild(option);
                });
            })
            .catch(err => {
                console.error('Failed to load gym list:', err);
            });
    </script>
</body>
</html>